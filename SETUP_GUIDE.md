# üöÄ KinoVzor Project Setup Guide

## ‚úÖ Quick Start (–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)

### 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
```bash
git pull origin main
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

### 3. **–í–ê–ñ–ù–û: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –ë–î**
```bash
# –ù–∞ Windows
del kinovzor.db

# –ù–∞ Linux/Mac
rm kinovzor.db
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –ë–î —á–µ—Ä–µ–∑ Alembic
```bash
# –ö–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –í–´ –ü–û–õ–ù–ï–ù–ê –ò–ó –ö–û–†–ù–Ø –ü–†–û–ï–ö–¢–ê!
alembic upgrade head
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 001, Initial database schema
```

### 5. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```bash
python seed_db.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
==================================================
‚úÖ DATABASE SEEDING SUCCESS!
==================================================
üë• Users created:
   - john_doe (regular user)
   - moderator (moderator)
   - admin (admin)
üé¨ Movies created: 5
üìù Reviews created: 5
‚≠ê Ratings created: 6
‚ù§Ô∏è  Favorites created: 4
==================================================

üìã Test Credentials:
   Regular User:  john_doe / password123
   Moderator:     moderator / modpass123
   Admin:         admin / adminpass123
==================================================
```

### 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
python main.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
==================================================
üåü KinoVzor - Movie Review Platform
==================================================

üöÄ Starting server...

INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete
```

### 7. –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
```
http://localhost:8000
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏

### –ë–î —Å–æ–∑–¥–∞–Ω–∞ —Å FK?
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–∏–ª–∞—Å—å
alembic current
# –í—ã–≤–æ–¥: 001
```

### –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã?
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
# –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è: john_doe / password123
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
```bash
# –û—Ç–∫—Ä–æ–π—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä
# http://localhost:8000
# –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ñ–∏–ª—å–º–∞–º–∏
```

---

## ‚ö†Ô∏è –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞: "Path doesn't exist: alembic"
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Å—å —á—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—à—å –∏–∑ –ö–û–†–ù–Ø –ø—Ä–æ–µ–∫—Ç–∞
```bash
# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
cd app
alembic upgrade head

# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
cd projectFastapi
alembic upgrade head
```

### –û—à–∏–±–∫–∞: "No foreign keys linking these tables"
**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—É—é –ë–î –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏—é
```bash
# 1. –£–¥–∞–ª–∏—Ç—å –ë–î
del kinovzor.db

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic upgrade head

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
python seed_db.py
```

### –û—à–∏–±–∫–∞: "Multiple head revisions are present"
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (—É–¥–∞–ª—ë–Ω –¥—É–±–ª–∏–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏)
```bash
git pull origin main
```

### –û—à–∏–±–∫–∞: "greenlet_spawn has not been called"
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (env.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç sync SQLite)
```bash
git pull origin main
alembic upgrade head
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
projectFastapi/
‚îú‚îÄ‚îÄ alembic.ini                      ‚Üê –ö–æ–Ω—Ñ–∏–≥ Alembic (–≤ –∫–æ—Ä–Ω–µ!)
‚îú‚îÄ‚îÄ init_db.py                       ‚Üê –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ seed_db.py                       ‚Üê –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ main.py                          ‚Üê –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt                 ‚Üê –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ alembic/                     ‚Üê –ú–∏–≥—Ä–∞—Ü–∏–∏ –∑–¥–µ—Å—å!
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ env.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ script.py.mako
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ 001_initial_schema.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îú‚îÄ‚îÄ movies/
‚îÇ   ‚îú‚îÄ‚îÄ reviews/
‚îÇ   ‚îú‚îÄ‚îÄ favorites/
‚îÇ   ‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ kinovzor.db                      ‚Üê SQLite –ë–î (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

---

## üéØ –ö–æ–º–∞–Ω–¥—ã Alembic

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic downgrade -1

# –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ë–î
alembic current

# –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π
alembic history

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π)
alembic revision --autogenerate -m "–û–ø–∏—Å–∞–Ω–∏–µ"
```

---

## üîê –¢–µ—Å—Ç–æ–≤—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `python seed_db.py`:

```
üë§ john_doe
   Password: password123
   Role: Regular User

üëÆ moderator
   Password: modpass123
   Role: Moderator

üîê admin
   Password: adminpass123
   Role: Administrator
```

---

## üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

–ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏—à—å –º–æ–¥–µ–ª—å:

```bash
# 1. –ò–∑–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, app/movies/models.py)
# 2. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "Add new field"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –≤ app/alembic/versions/
# 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å
alembic upgrade head

# 5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python main.py
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∏–ª—å–º—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- –û—Ç–∫—Ä—ã—Ç—å http://localhost:8000
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã 5 —Ñ–∏–ª—å–º–æ–≤

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–Ω
- –õ–æ–≥–∏–Ω: john_doe
- –ü–∞—Ä–æ–ª—å: password123
- –î–æ–ª–∂–µ–Ω –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ (–Ω–∞–∂–∞—Ç—å –∑–≤–µ–∑–¥—É)
- –î–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–∏—Ç—å—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏–∏
- –û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª—å–º
- –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã —Ä–µ—Ü–µ–Ω–∑–∏–∏
- –ú–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ä–µ—Ü–µ–Ω–∑–∏—é

### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
- –õ–æ–≥–∏–Ω: moderator
- –ü–∞—Ä–æ–ª—å: modpass123
- –ú–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏–∏

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω:
- ‚úÖ SQLAlchemy async –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ SQLite –ë–î —Å FK
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ù–∞—á–Ω–∏:**
```bash
git pull origin main
del kinovzor.db
alembic upgrade head
python seed_db.py
python main.py
```

**–£—Å–ø–µ—Ö–∞! üéâ**
